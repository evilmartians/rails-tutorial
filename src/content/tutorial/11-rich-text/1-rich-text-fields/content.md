---
type: lesson
title: Rich Text Fields with Action Text
focus: /workspace/store/app/models/product.rb
previews:
  - 3000
custom:
  shell:
    workdir: "/workspace/store"
---

### Rich Text Fields with Action Text

Many applications need rich text with embeds (i.e. multimedia elements) and Rails provides this functionality out of the box with Action Text.

To use Action Text, you'll first run the installer:

```bash
bin/rails action_text:install
bundle install
bin/rails db:migrate
```

Restart your Rails server to make sure all the new features are loaded.

Now, let's add a rich text description field to our product.

First, add the following to the `Product` model:

```ruby ins={2}
class Product < ApplicationRecord
  has_rich_text :description
  validates :name, presence: true
end
```

The form can now be updated to include a rich text field for editing the description in `app/views/products/_form.html.erb` before the submit button.

```erb ins={7-10}
<%= form_with model: product do |form| %>
  <div>
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div>
    <%= form.label :description, style: "display: block" %>
    <%= form.rich_text_area :description %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>
```

Our controller also needs to permit this new parameter when the form is submitted, so we'll update the permitted params to include description in `app/controllers/products_controller.rb`

```ruby ins={44} del={44}
  # Only allow a list of trusted parameters through.
  def product_params
    params.expect(product: [ :name ])
    params.expect(product: [ :name, :description ])
  end
```

We also need to update the show view to display the description in `app/views/products/show.html.erb`:

```erb ins={3}
<% cache @product do %>
  <h1><%= @product.name %></h1>
  <%= @product.description %>
<% end %>
<%= link_to "Back", products_path %>
<% if authenticated? %>
  <%= link_to "Edit", edit_product_path(@product) %>
  <%= button_to "Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure?" } %>
<% end %>
```

The cache key generated by Rails also changes when the view is modified. This makes sure the cache stays in sync with the latest version of the view template.

Create a new product and add a description with bold and italic text. You'll see that the show page displays the formatted text and editing the product retains this rich text in the text area.

## How Action Text Works

Action Text provides:

1. **Rich text editor** - A WYSIWYG editor powered by Trix
2. **Secure HTML rendering** - Safe rendering of rich content
3. **File attachments** - Drag and drop images directly into the editor
4. **Database storage** - Rich content stored efficiently in the database
5. **Integration with Active Storage** - Seamless file upload handling

The rich text editor allows users to format text with:
- **Bold** and *italic* styling
- Lists (ordered and unordered)
- Links
- Images (drag and drop)
- Code blocks
- And more formatting options

Try creating a product with rich text content and see how it works!